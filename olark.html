<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Olark Group Selector</title>
    <script type="text/javascript" async>
        (function(o,l,a,r,k,y){
            if(o.olark)return; 
            r="script";
            y=l.createElement(r);
            r=l.getElementsByTagName(r)[0];
            y.async=1;y.src="//"+a;
            r.parentNode.insertBefore(y,r);
            y=o.olark=function(){
                k.s.push(arguments);
                k.t.push(+new Date)
            };
            y.extend=function(i,j){y("extend",i,j)};
            y.identify=function(i){y("identify",k.i=i)};
            y.configure=function(i,j){y("configure",i,j);k.c[i]=j};
            k=y._={s:[],t:[+new Date],c:{},l:a};
        })(window,document,"static.olark.com/jsclient/loader.js");

        olark.identify('3192-298-10-9167');
    </script>
</head>
<body>
	<p>Dummy site to test Olark, script added, script with group embeds</p>
    <!-- Olark pre-chat form will be injected by Clark's system -->

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Wait for the Olark pre-chat form to be rendered by Clark's system
            const observer = new MutationObserver(function(mutations, me) {
                const preChatForm = document.querySelector('.olark-form'); // Adjust the selector to match the actual form class/id
                if (preChatForm) {
                    // Form found, stop observing
                    me.disconnect();

                    // Listen for form submission
                    preChatForm.addEventListener('submit', function(event) {
                        const selectedGroup = document.querySelector('input[name="groupSelection"]:checked'); // Adjust this to match the actual input name
                        if (selectedGroup) {
                            const groupId = selectedGroup.value;

                            switch (groupId) {
                                case '2733f1b4f9b63faad8dc40e96698e7c7':
                                    olark.configure('system.group', '2733f1b4f9b63faad8dc40e96698e7c7'); // 9 Levers Agent Group
                                    break;
                                case 'c5e72d5632d57af246b5b80c7bf3f554':
                                    olark.configure('system.group', 'c5e72d5632d57af246b5b80c7bf3f554'); // 300 Mastermind Agent Group
                                    break;
                                case '8a6a0ee5b49d35669bd89bb42e62df2f':
                                    olark.configure('system.group', '8a6a0ee5b49d35669bd89bb42e62df2f'); // ViralPages Agent Group
                                    break;
                                case 'bc72a0eb3298e127c97b711d12dad696':
                                    olark.configure('system.group', 'bc72a0eb3298e127c97b711d12dad696'); // Other Programs Agent Group
                                    break;
                                default:
                                    console.error('Unknown group selected');
                            }
                        }
                    });
                }
            });

            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        });
    </script>
</body>
</html>
