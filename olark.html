<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre-chat Selector</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }

        .chat-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #0078d4;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            z-index: 1000;
        }

        .chat-selector {
            position: fixed;
            bottom: 80px;
            right: 20px;
            background-color: white;
            border: 1px solid #ccc;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: none;
            z-index: 1000;
        }

        .chat-selector h3 {
            margin: 0 0 10px 0;
        }

        .chat-selector div {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="chat-button" id="chatButton">Let's chat!</div>
    
    <div class="chat-selector" id="chatSelector">
        <h3>Select your program:</h3>
        <div>
            <input type="radio" id="9levers" name="program" value="9levers">
            <label for="9levers">9 Levers</label>
        </div>
        <div>
            <input type="radio" id="viralpages" name="program" value="viralpages">
            <label for="viralpages">ViralPages.ai</label>
        </div>
        <div>
            <input type="radio" id="mastermind" name="program" value="mastermind">
            <label for="mastermind">300 Mastermind</label>
        </div>
        <div>
            <input type="radio" id="other" name="program" value="other">
            <label for="other">Other programs</label>
        </div>
        <button onclick="startChat()">Start Chat</button>
    </div>

    <script>
        document.getElementById('chatButton').addEventListener('click', function() {
            document.getElementById('chatSelector').style.display = 'block';
        });

        function startChat() {
            const selectedProgram = document.querySelector('input[name="program"]:checked').value;
            loadOlarkInstance(selectedProgram);

            // Hide the chat button and selector form
            document.getElementById('chatButton').style.display = 'none';
            document.getElementById('chatSelector').style.display = 'none';
        }

        function loadOlarkInstance(program) {
            const olarkCode = {
                '9levers': '2733f1b4f9b63faad8dc40e96698e7c7',
                'viralpages': '8a6a0ee5b49d35669bd89bb42e62df2f',
                'mastermind': 'c5e72d5632d57af246b5b80c7bf3f554',
                'other': 'bc72a0eb3298e127c97b711d12dad696'
            };

            const groupCode = olarkCode[program];

            (function(o,l,a,r,k,y){if(o.olark)return;r="script";y=l.createElement(r);r=l.getElementsByTagName(r)[0];
            y.async=1;y.src="//"+a;r.parentNode.insertBefore(y,r);y=o.olark=function(){k.s.push(arguments);k.t.push(+new Date)};
            y.extend=function(i,j){y("extend",i,j)};y.identify=function(i){y("identify",k.i=i)};y.configure=function(i,j){y("configure",i,j);k.c[i]=j};
            k=y._={s:[],t:[+new Date],c:{},l:a};})(window,document,"static.olark.com/jsclient/loader.js");

            olark.identify('3192-298-10-9167'); // Your Olark Site ID
            olark.configure('system.group', groupCode);

            console.log(`Loaded Olark group: ${groupCode}`);

            // Automatically open the chat window
            olark('api.box.expand');
        }
    </script>
    <p> version 17 hide button and form after clicking "Start Chat"</p>
</body>
</html>
